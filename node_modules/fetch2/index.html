<!DOCTYPE html>
<html>
<head>
	<title>test</title>
</head>
<body>

<pre>
	npm install
	npm start
	open http://127.0.0.1:9000/	
</pre>

<pre>
	
	co(function *(){
		var user = yield fetch("http://127.0.0.1:9000/test/json").json()
		console.log(user) // {fistName:"lu", lastName:"jun"}
	})

</pre>

<script type="text/javascript" src="co.js"></script>
<script type="text/javascript" src="fetch.js"></script>

<script type="text/javascript">

	co(function *(){
		var user = yield fetch2("http://localhost:9000/test/json").json()
		console.log(user)
	});

	function user(){
		fetch2("http://localhost:9000/test/json").json().then((user)=>{
			console.log(user)
		})
	}
	user();

	//test error
	co(function*(){
		try{
			yield fetch2("http://localhost:9000/test/json").json().then((user)=>{
				throw new Error("error test")
			})
		}catch(e){
			console.log(e)
		}
	})

</script>

</body>
</html>